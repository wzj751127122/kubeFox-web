{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nimport { defineComponent, ref, onMounted, markRaw, watch, unref, openBlock, createElementBlock, computed, nextTick, shallowRef, getCurrentInstance, onBeforeUnmount, normalizeClass, normalizeStyle, createBlock, resolveDynamicComponent, mergeProps } from \"vue\";\nimport \"codemirror/lib/codemirror.css\";\nimport _CodeMirror from \"codemirror\";\nimport \"codemirror/addon/merge/merge.css\";\nimport \"codemirror/addon/merge/merge.js\";\nimport DiffMatchPatch from \"diff-match-patch\";\nimport \"codemirror/addon/mode/simple.js\";\n!window.CodeMirror && (window.CodeMirror = _CodeMirror);\nconst CodeMirror$1 = window.CodeMirror || _CodeMirror;\n\nvar _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n\n  return target;\n};\n\nconst _sfc_main$3 = defineComponent({\n  name: \"DefaultMode\",\n  props: {\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    value: {\n      type: String,\n      default: \"\"\n    },\n    content: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => null\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: {\n    ready: instance => instance,\n    \"update:cminstance\": instance => instance\n  },\n\n  setup(props, {\n    emit\n  }) {\n    const textarea = ref();\n\n    const _cminstance = ref(null);\n\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$1.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      const unwatch = watch(() => props.cminstance, val => {\n        var _a;\n\n        val && ((_a = props.cminstance) == null ? void 0 : _a.setValue(props.value || props.content));\n        emit(\"ready\", unref(_cminstance));\n        unwatch == null ? void 0 : unwatch();\n      }, {\n        deep: true\n      });\n    };\n\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      textarea,\n      initialize\n    };\n  }\n\n});\n\nconst _hoisted_1$2 = [\"name\", \"placeholder\"];\n\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1$2);\n}\n\nvar Default = /* @__PURE__ */_export_sfc(_sfc_main$3, [[\"render\", _sfc_render$2]]);\n\nwindow.diff_match_patch = DiffMatchPatch;\nwindow.DIFF_DELETE = -1;\nwindow.DIFF_INSERT = 1;\nwindow.DIFF_EQUAL = 0;\n\nconst _sfc_main$2 = defineComponent({\n  name: \"MergeMode\",\n  props: {\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n\n  setup(props, {\n    emit\n  }) {\n    const _cminstance = ref();\n\n    const mergeView = ref();\n\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$1.MergeView(mergeView.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      emit(\"ready\", _cminstance);\n    };\n\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      mergeView,\n      initialize\n    };\n  }\n\n});\n\nconst _hoisted_1$1 = {\n  ref: \"mergeView\"\n};\n\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, null, 512);\n}\n\nvar Merge = /* @__PURE__ */_export_sfc(_sfc_main$2, [[\"render\", _sfc_render$1]]);\n\nvar logErrorType;\n\n(function (logErrorType2) {\n  logErrorType2[\"info\"] = \"info\";\n  logErrorType2[\"warning\"] = \"warning\";\n  logErrorType2[\"error\"] = \"error\";\n})(logErrorType || (logErrorType = {}));\n\nfunction getLocalTime() {\n  const date = new Date();\n  const h = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n  const m = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n  const s = date.getSeconds() < 10 ? `0${date.getSeconds()}` : date.getSeconds();\n  return `${h}:${m}:${s}`;\n}\n\nfunction createLinkMark(attrs) {\n  return `#link#${JSON.stringify(attrs)}#link#`;\n}\n\nfunction getLinkMarks(value) {\n  const linkRegexp = /#link#(.+)#link#/g;\n  const result = [];\n  let indexObj;\n  indexObj = linkRegexp.exec(value);\n\n  while (indexObj) {\n    const node = document.createElement(\"a\");\n    const attrs = JSON.parse(indexObj[1]);\n    const keyAndValues = Object.entries(attrs);\n\n    for (const [_key, _value] of keyAndValues) {\n      node.setAttribute(_key, _value);\n    }\n\n    node.className = \"editor_custom_link\";\n    node.innerHTML = \"logDownload\";\n    result.push({\n      start: indexObj.index,\n      end: indexObj.index + indexObj[0].length,\n      node\n    });\n    indexObj = linkRegexp.exec(value);\n  }\n\n  return result;\n}\n\nfunction createLogMark(text = \"\", type = \"info\") {\n  return `#log<${type}>log#${text}#log<${type}>log#`;\n}\n\nfunction getLogMark(value) {\n  const result = [];\n\n  function match() {\n    const logRegexp = /#log<(\\w*)>log#((.|\\r\\n|\\n)*?)#log<(\\w*)>log#/g;\n    let indexObj;\n    indexObj = logRegexp.exec(value);\n\n    while (indexObj) {\n      const text = indexObj[0].replace(/\\r\\n/g, \"\\n\");\n      const textArr = text.split(\"\\n\");\n      const content = indexObj[2].replace(/\\r\\n/g, \"\\n\");\n      const contentArr = content.split(\"\\n\");\n      const node = document.createElement(\"span\");\n      const type = indexObj[1];\n      node.className = `c-editor--log__${type}`;\n      let offset = 0;\n\n      for (let i = 0; i < textArr.length; i++) {\n        const textItem = textArr[i];\n        const contentItem = contentArr[i];\n        const cloneNode = node.cloneNode(false);\n        cloneNode.innerText = contentItem;\n        result.push({\n          start: indexObj.index + offset,\n          end: indexObj.index + offset + textItem.length,\n          node: cloneNode\n        });\n        offset = offset + textItem.length + 1;\n      }\n\n      indexObj = logRegexp.exec(value);\n    }\n  }\n\n  match();\n  return result;\n}\n\nfunction createLog(log, type) {\n  const now = getLocalTime();\n  return `[${now}] <${type}> ${log}`;\n}\n\nfunction createTitle(title, symbolLength, symbol) {\n  const arr = new Array(Math.max(symbolLength || 15, 5));\n  const wrapText = arr.join(symbol || \"=\");\n  return `${wrapText}${title}${wrapText}`;\n}\n\nconst startRegex = [{\n  regex: /(\\[.*?\\])([ \\t]*)(<error>[ \\t])(.+)/,\n  token: [\"tag\", \"\", \"error.strong\", \"error.strong\"],\n  sol: true\n}, {\n  regex: /(\\[.*?\\])([ \\t]*)(<info>)(.+)(.?)/,\n  token: [\"tag\", \"\", \"bracket\", \"bracket\", \"hr\"],\n  sol: true\n}, {\n  regex: /(\\[.*?\\])([ \\t]*)(<warning>)(.+)(.?)/,\n  token: [\"tag\", \"\", \"comment\", \"comment\", \"hr\"],\n  sol: true\n}];\nCodeMirror$1.defineSimpleMode(\"fclog\", {\n  start: [...startRegex, {\n    regex: /.*/,\n    token: \"hr\"\n  }],\n  error: [...startRegex, {\n    regex: /.*/,\n    token: \"error.strong\"\n  }],\n  info: [...startRegex, {\n    regex: /.*/,\n    token: \"bracket\"\n  }],\n  warning: [...startRegex, {\n    regex: /.*\\[/,\n    token: \"comment\"\n  }]\n});\nCodeMirror$1.defineSimpleMode(\"log\", {\n  start: [{\n    regex: /^[=]+[^=]*[=]+/,\n    token: \"strong\"\n  }, {\n    regex: /([^\\w])([A-Z][\\w]*)/,\n    token: [\"\", \"string\"]\n  }, {\n    regex: /(^[A-Z][\\w]*)/,\n    token: \"string\"\n  }]\n});\n\nconst _sfc_main$1 = defineComponent({\n  name: \"CodemirrorFclog\",\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n\n  setup(props, {\n    emit\n  }) {\n    const textarea = ref();\n\n    const _cminstance = ref(null);\n\n    const renderTextMark = (cminstance = props.cminstance) => {\n      const marks = cminstance.getAllMarks();\n      marks.forEach(mark => mark.clear());\n      const value = cminstance.getValue();\n      const linkMarks = [].concat(getLinkMarks(value)).concat(getLogMark(value));\n\n      for (let _i = 0; _i < linkMarks.length; _i++) {\n        const mark = linkMarks[_i];\n        cminstance.markText(cminstance.posFromIndex(mark.start), cminstance.posFromIndex(mark.end), {\n          replacedWith: mark.node\n        });\n      }\n    };\n\n    const initialize = () => {\n      var _a;\n\n      _cminstance.value = markRaw(CodeMirror$1.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", unref(_cminstance));\n      (_a = _cminstance.value) == null ? void 0 : _a.on(\"change\", renderTextMark);\n    };\n\n    watch(() => props.cminstance, val => {\n      var _a;\n\n      if (val) {\n        renderTextMark(props.cminstance);\n        (_a = props.cminstance) == null ? void 0 : _a.setValue(props.value);\n        emit(\"ready\", _cminstance);\n      }\n    }, {\n      deep: true,\n      immediate: true\n    });\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      initialize,\n      textarea\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"name\", \"placeholder\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1);\n}\n\nvar FcLog = /* @__PURE__ */_export_sfc(_sfc_main$1, [[\"render\", _sfc_render]]);\n\nconst componentEventMap = {\n  \"update:value\": value => value,\n  change: (value, cm) => ({\n    value,\n    cm\n  }),\n  input: value => value,\n  ready: cm => cm\n};\nconst cmEvts = [\"changes\", \"scroll\", \"beforeChange\", \"cursorActivity\", \"keyHandled\", \"inputRead\", \"electricInput\", \"beforeSelectionChange\", \"viewportChange\", \"swapDoc\", \"gutterClick\", \"gutterContextMenu\", \"focus\", \"blur\", \"refresh\", \"optionChange\", \"scrollCursorIntoView\", \"update\"];\n\nconst getCmEvts = () => {\n  const result = {};\n  cmEvts.forEach(name => {\n    result[name] = (...args) => args;\n  });\n  return result;\n};\n\nconst emitOptions = __spreadValues(__spreadValues({}, componentEventMap), getCmEvts());\n\nconst DEFAULT_OPTIONS = {\n  mode: \"text\",\n  theme: \"default\",\n  lineNumbers: true,\n  smartIndent: true,\n  indentUnit: 2\n};\n\nfunction scrollToEnd(cm) {\n  Promise.resolve().then(() => {\n    const nowScrollInfo = cm.getScrollInfo();\n    cm.scrollTo(nowScrollInfo.left, nowScrollInfo.height);\n  });\n}\n\nconst useEvents = ({\n  props,\n  cminstance,\n  emit,\n  internalInstance,\n  content\n}) => {\n  const realCm = computed(() => {\n    var _a;\n\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n\n  const getBindEvents = () => {\n    const evts = [];\n    Object.keys(internalInstance == null ? void 0 : internalInstance.vnode.props).forEach(v => {\n      if (v.startsWith(\"on\")) {\n        const e = v.replace(v[2], v[2].toLowerCase()).slice(2);\n        !componentEventMap[e] && evts.push(e);\n      }\n    });\n    return evts;\n  };\n\n  const listenerEvents = () => {\n    realCm.value.on(\"change\", cm => {\n      const currentVal = cm.getValue();\n      if (currentVal === content.value) return;\n      content.value = currentVal;\n      content.value && emit(\"update:value\", content.value || \"\");\n      content.value && emit(\"input\", content.value || \"\");\n      Promise.resolve().then(() => {\n        emit(\"change\", content.value, cm);\n      });\n      props.keepCursorInEnd && scrollToEnd(cm);\n    });\n    const tmpEvents = {};\n    const bindEvts = getBindEvents();\n    bindEvts.filter(e => !tmpEvents[e] && (tmpEvents[e] = true)).forEach(event => {\n      realCm.value.on(event, (...args) => {\n        emit(event, ...args);\n      });\n    });\n  };\n\n  return {\n    listenerEvents\n  };\n};\n\nfunction useViewControl({\n  props,\n  cminstance,\n  presetRef\n}) {\n  const containerWidth = ref(null);\n  const containerHeight = ref(null);\n  const realCm = computed(() => {\n    var _a;\n\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n\n  const refresh = () => {\n    nextTick(() => {\n      var _a;\n\n      (_a = realCm.value) == null ? void 0 : _a.refresh();\n    });\n  };\n\n  const resize = (width = props.width, height = props.height) => {\n    var _a;\n\n    containerWidth.value = String(width).replace(\"px\", \"\");\n    containerHeight.value = String(height).replace(\"px\", \"\");\n    const cmHeight = containerHeight.value;\n    (_a = realCm.value) == null ? void 0 : _a.setSize(containerWidth.value, cmHeight);\n  };\n\n  const destroy = () => {\n    var _a;\n\n    const element = (_a = realCm.value) == null ? void 0 : _a.getWrapperElement();\n    element == null ? void 0 : element.remove();\n  };\n\n  const reload = () => {\n    var _a, _b, _c;\n\n    const history = (_a = realCm.value) == null ? void 0 : _a.getDoc().getHistory();\n    (_b = presetRef.value) == null ? void 0 : _b.initialize();\n    destroy();\n    (_c = realCm.value) == null ? void 0 : _c.getDoc().setHistory(history);\n  };\n\n  const isStyleChaotic = () => {\n    const gutterEl = document.querySelector(\".CodeMirror-gutters\");\n    const gutterElLeft = gutterEl == null ? void 0 : gutterEl.style.left.replace(\"px\", \"\");\n    return gutterElLeft !== \"0\";\n  };\n\n  const reviseStyle = () => {\n    refresh();\n    if (!isStyleChaotic()) return;\n    const timer = setInterval(() => {\n      isStyleChaotic() ? refresh() : clearInterval(timer);\n    }, 60);\n    const clearTimer = setTimeout(() => {\n      clearInterval(timer);\n      clearTimeout(clearTimer);\n    }, 400);\n  };\n\n  return {\n    reload,\n    refresh,\n    resize,\n    destroy,\n    containerHeight,\n    reviseStyle\n  };\n}\n\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    globalOptions: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: [String, Number],\n      default: null\n    },\n    height: {\n      type: [String, Number],\n      default: null\n    },\n    originalStyle: {\n      type: Boolean,\n      default: false\n    },\n    keepCursorInEnd: {\n      type: Boolean,\n      default: false\n    },\n    merge: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: \"\"\n    },\n    marker: {\n      type: Function,\n      default: () => null\n    },\n    unseenLines: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: emitOptions,\n\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    var _a, _b;\n\n    const props = __props;\n\n    if (typeof Object.assign !== \"function\") {\n      Object.defineProperty(Object, \"assign\", {\n        value(target, varArgs) {\n          if (target == null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n          }\n\n          const to = Object(target);\n\n          for (let index2 = 1; index2 < arguments.length; index2++) {\n            const nextSource = arguments[index2];\n\n            if (nextSource != null) {\n              for (const nextKey in nextSource) {\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                  to[nextKey] = nextSource[nextKey];\n                }\n              }\n            }\n          }\n\n          return to;\n        },\n\n        writable: true,\n        configurable: true\n      });\n    }\n\n    const cminstance = ref(null);\n    const content = ref(\"\");\n    const presetModeName = shallowRef(Default);\n    const cmOptions = ref(__spreadValues(__spreadValues(__spreadValues({}, DEFAULT_OPTIONS), props.globalOptions), props.options));\n    const internalInstance = getCurrentInstance();\n    const instanceName = props.name || ((_b = (_a = internalInstance == null ? void 0 : internalInstance.parent) == null ? void 0 : _a.type) == null ? void 0 : _b.name) || void 0;\n    const presetRef = ref(null);\n    const realCminstance = computed(() => {\n      var _a2;\n\n      return props.merge ? (_a2 = unref(cminstance)) == null ? void 0 : _a2.editor() : unref(cminstance);\n    });\n    const {\n      refresh,\n      resize,\n      destroy,\n      containerHeight,\n      reviseStyle\n    } = useViewControl({\n      props,\n      cminstance,\n      presetRef\n    });\n    const {\n      listenerEvents\n    } = useEvents({\n      props,\n      cminstance,\n      emit,\n      internalInstance,\n      content\n    });\n\n    const unseenLineMarkers = () => {\n      if (props.unseenLines !== void 0 && props.marker !== void 0) {\n        props.unseenLines.forEach(line => {\n          var _a2, _b2;\n\n          const info = (_a2 = cminstance.value) == null ? void 0 : _a2.lineInfo(line);\n          (_b2 = cminstance.value) == null ? void 0 : _b2.setGutterMarker(line, \"breakpoints\", (info == null ? void 0 : info.gutterMarkers) ? null : props.marker());\n        });\n      }\n    };\n\n    const onCodeChange = newVal => {\n      var _a2, _b2;\n\n      const CM_VALUE = (_a2 = cminstance.value) == null ? void 0 : _a2.getValue();\n\n      if (newVal !== CM_VALUE) {\n        (_b2 = cminstance.value) == null ? void 0 : _b2.setValue(newVal);\n        content.value = newVal;\n        reviseStyle();\n      }\n\n      unseenLineMarkers();\n    };\n\n    const ready = () => {\n      listenerEvents();\n      unseenLineMarkers();\n      resize(props.width, props.height);\n      emit(\"ready\", cminstance.value);\n      watch([() => props.width, () => props.height], ([width, height]) => {\n        resize(width, height);\n      }, {\n        deep: true\n      });\n    };\n\n    const handlePresetModeName = () => {\n      if (props.options.mode === \"fclog\" || props.options.mode === \"log\") {\n        presetModeName.value = FcLog;\n        return;\n      }\n\n      if (props.merge) {\n        presetModeName.value = Merge;\n        return;\n      }\n\n      presetModeName.value = Default;\n    };\n\n    watch(() => props.options, val => {\n      var _a2;\n\n      for (const key in props.options) {\n        (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(key, unref(val[key]));\n      }\n    }, {\n      deep: true\n    });\n    watch(() => props.value, val => {\n      onCodeChange(val);\n    });\n    watch(() => props.placeholder, val => {\n      var _a2;\n\n      (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(\"placeholder\", val);\n    });\n    watch(() => props.merge, val => {\n      handlePresetModeName();\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(() => {\n      destroy();\n    });\n    expose({\n      cminstance,\n      resize,\n      refresh,\n      destroy\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\"codemirror-container\", {\n          merge: _ctx.$props.merge,\n          bordered: _ctx.$props.border || _ctx.$props.merge && !props.originalStyle,\n          \"width-auto\": !_ctx.$props.width || _ctx.$props.width == \"100%\",\n          \"height-auto\": !_ctx.$props.height || _ctx.$props.height == \"100%\",\n          \"original-style\": props.originalStyle\n        }]),\n        style: normalizeStyle({\n          height: unref(containerHeight) + \"px\"\n        })\n      }, [(openBlock(), createBlock(resolveDynamicComponent(unref(presetModeName)), mergeProps({\n        ref_key: \"presetRef\",\n        ref: presetRef,\n        cminstance: cminstance.value,\n        \"onUpdate:cminstance\": _cache[0] || (_cache[0] = $event => cminstance.value = $event),\n        style: {\n          \"height\": \"100%\"\n        }\n      }, __spreadProps(__spreadValues(__spreadValues({}, _ctx.$props), _ctx.$attrs), {\n        options: cmOptions.value,\n        name: unref(instanceName),\n        content: content.value\n      }), {\n        onReady: ready\n      }), null, 16, [\"cminstance\"]))], 6);\n    };\n  }\n\n});\n\nvar index = \"\";\n\nconst install = (app, config) => {\n  if (config) {\n    if (config.options) {\n      _sfc_main.props.globalOptions.default = () => config.options;\n    }\n  }\n\n  app.component((config == null ? void 0 : config.componentName) || \"Codemirror\", _sfc_main);\n  return app;\n};\n\nconst CodeMirror = window.CodeMirror || CodeMirror$1;\nconst GlobalCmComponent = install;\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) {\n    ref = {};\n  }\n\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === \"undefined\") {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName(\"head\")[0];\n  var style = document.createElement(\"style\");\n  style.type = \"text/css\";\n\n  if (insertAt === \"top\") {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\n;\nstyleInject(`.codemirror-container {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  width: fit-content;\n  font-size: 12px;\n  overflow: hidden;\n}\n.codemirror-container.bordered {\n  border-radius: 4px;\n  border: 1px solid #dddddd;\n}\n.codemirror-container.width-auto {\n  width: 100%;\n}\n.codemirror-container.height-auto {\n  height: 100%;\n}\n.codemirror-container.height-auto .CodeMirror,\n.codemirror-container.height-auto .cm-s-default {\n  height: 100% !important;\n}\n.codemirror-container .editor_custom_link {\n  cursor: pointer;\n  color: #1474f1;\n  text-decoration: underline;\n}\n.codemirror-container .editor_custom_link:hover {\n  color: #04b4fa;\n}\n.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {\n  color: #666;\n}\n.codemirror-container:not(.original-style) .CodeMirror,\n.codemirror-container:not(.original-style) .CodeMirror-merge-pane {\n  height: 100%;\n  font-family: consolas !important;\n}\n.codemirror-container:not(.original-style) .CodeMirror-merge,\n.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {\n  height: 100%;\n  border: none !important;\n}\n.codemirror-container:not(.original-style) .c-editor--log__error {\n  color: #bb0606;\n  font-weight: bold;\n}\n.codemirror-container:not(.original-style) .c-editor--log__info {\n  color: #333333;\n  font-weight: bold;\n}\n.codemirror-container:not(.original-style) .c-editor--log__warning {\n  color: #ee9900;\n}\n.codemirror-container:not(.original-style) .c-editor--log__success {\n  color: #669600;\n}\n.codemirror-container:not(.original-style) .cm-header,\n.codemirror-container:not(.original-style) .cm-strong {\n  font-weight: bold;\n}\n`);\nexport { CodeMirror, GlobalCmComponent, _sfc_main as VueCodemirror, createLinkMark, createLog, createLogMark, createTitle, _sfc_main as default, getLinkMarks, getLocalTime, getLogMark, logErrorType };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","defineComponent","ref","onMounted","markRaw","watch","unref","openBlock","createElementBlock","computed","nextTick","shallowRef","getCurrentInstance","onBeforeUnmount","normalizeClass","normalizeStyle","createBlock","resolveDynamicComponent","mergeProps","_CodeMirror","DiffMatchPatch","window","CodeMirror","CodeMirror$1","_export_sfc","sfc","props","target","__vccOpts","val","_sfc_main$3","name","type","String","default","Date","content","options","cminstance","placeholder","emits","ready","instance","setup","emit","textarea","_cminstance","initialize","fromTextArea","unwatch","_a","setValue","deep","_hoisted_1$2","_sfc_render$2","_ctx","_cache","$props","$setup","$data","$options","Default","diff_match_patch","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","_sfc_main$2","mergeView","MergeView","_hoisted_1$1","_sfc_render$1","Merge","logErrorType","logErrorType2","getLocalTime","date","h","getHours","m","getMinutes","s","getSeconds","createLinkMark","attrs","JSON","stringify","getLinkMarks","linkRegexp","result","indexObj","exec","node","document","createElement","parse","keyAndValues","entries","_key","_value","setAttribute","className","innerHTML","push","start","index","end","length","createLogMark","text","getLogMark","match","logRegexp","replace","textArr","split","contentArr","offset","i","textItem","contentItem","cloneNode","innerText","createLog","log","now","createTitle","title","symbolLength","symbol","arr","Array","Math","max","wrapText","join","startRegex","regex","token","sol","defineSimpleMode","error","info","warning","_sfc_main$1","renderTextMark","marks","getAllMarks","forEach","mark","clear","getValue","linkMarks","concat","_i","markText","posFromIndex","replacedWith","on","immediate","_hoisted_1","_sfc_render","FcLog","componentEventMap","change","cm","input","cmEvts","getCmEvts","args","emitOptions","DEFAULT_OPTIONS","mode","theme","lineNumbers","smartIndent","indentUnit","scrollToEnd","Promise","resolve","then","nowScrollInfo","getScrollInfo","scrollTo","left","height","useEvents","internalInstance","realCm","merge","editor","getBindEvents","evts","keys","vnode","v","startsWith","e","toLowerCase","slice","listenerEvents","currentVal","keepCursorInEnd","tmpEvents","bindEvts","filter","event","useViewControl","presetRef","containerWidth","containerHeight","refresh","resize","width","cmHeight","setSize","destroy","element","getWrapperElement","remove","reload","_b","_c","history","getDoc","getHistory","setHistory","isStyleChaotic","gutterEl","querySelector","gutterElLeft","style","reviseStyle","timer","setInterval","clearInterval","clearTimer","setTimeout","clearTimeout","_sfc_main","globalOptions","border","Boolean","Number","originalStyle","marker","Function","unseenLines","__props","expose","assign","varArgs","TypeError","to","index2","arguments","nextSource","nextKey","presetModeName","cmOptions","instanceName","parent","realCminstance","_a2","unseenLineMarkers","line","_b2","lineInfo","setGutterMarker","gutterMarkers","onCodeChange","newVal","CM_VALUE","handlePresetModeName","setOption","class","bordered","ref_key","$event","$attrs","onReady","install","app","config","component","componentName","GlobalCmComponent","styleInject","css","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","VueCodemirror"],"sources":["/Users/allen/k8s-platform-fe/node_modules/codemirror-editor-vue3/dist/codemirror-editor-vue3.es.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport { defineComponent, ref, onMounted, markRaw, watch, unref, openBlock, createElementBlock, computed, nextTick, shallowRef, getCurrentInstance, onBeforeUnmount, normalizeClass, normalizeStyle, createBlock, resolveDynamicComponent, mergeProps } from \"vue\";\nimport \"codemirror/lib/codemirror.css\";\nimport _CodeMirror from \"codemirror\";\nimport \"codemirror/addon/merge/merge.css\";\nimport \"codemirror/addon/merge/merge.js\";\nimport DiffMatchPatch from \"diff-match-patch\";\nimport \"codemirror/addon/mode/simple.js\";\n!window.CodeMirror && (window.CodeMirror = _CodeMirror);\nconst CodeMirror$1 = window.CodeMirror || _CodeMirror;\nvar _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nconst _sfc_main$3 = defineComponent({\n  name: \"DefaultMode\",\n  props: {\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    value: {\n      type: String,\n      default: \"\"\n    },\n    content: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => null\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: {\n    ready: (instance) => instance,\n    \"update:cminstance\": (instance) => instance\n  },\n  setup(props, { emit }) {\n    const textarea = ref();\n    const _cminstance = ref(null);\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$1.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      const unwatch = watch(() => props.cminstance, (val) => {\n        var _a;\n        val && ((_a = props.cminstance) == null ? void 0 : _a.setValue(props.value || props.content));\n        emit(\"ready\", unref(_cminstance));\n        unwatch == null ? void 0 : unwatch();\n      }, { deep: true });\n    };\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      textarea,\n      initialize\n    };\n  }\n});\nconst _hoisted_1$2 = [\"name\", \"placeholder\"];\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1$2);\n}\nvar Default = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$2]]);\nwindow.diff_match_patch = DiffMatchPatch;\nwindow.DIFF_DELETE = -1;\nwindow.DIFF_INSERT = 1;\nwindow.DIFF_EQUAL = 0;\nconst _sfc_main$2 = defineComponent({\n  name: \"MergeMode\",\n  props: {\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n  setup(props, { emit }) {\n    const _cminstance = ref();\n    const mergeView = ref();\n    const initialize = () => {\n      _cminstance.value = markRaw(CodeMirror$1.MergeView(mergeView.value, props.options));\n      emit(\"update:cminstance\", _cminstance.value);\n      emit(\"ready\", _cminstance);\n    };\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      mergeView,\n      initialize\n    };\n  }\n});\nconst _hoisted_1$1 = { ref: \"mergeView\" };\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, null, 512);\n}\nvar Merge = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$1]]);\nvar logErrorType;\n(function(logErrorType2) {\n  logErrorType2[\"info\"] = \"info\";\n  logErrorType2[\"warning\"] = \"warning\";\n  logErrorType2[\"error\"] = \"error\";\n})(logErrorType || (logErrorType = {}));\nfunction getLocalTime() {\n  const date = new Date();\n  const h = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n  const m = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n  const s = date.getSeconds() < 10 ? `0${date.getSeconds()}` : date.getSeconds();\n  return `${h}:${m}:${s}`;\n}\nfunction createLinkMark(attrs) {\n  return `#link#${JSON.stringify(attrs)}#link#`;\n}\nfunction getLinkMarks(value) {\n  const linkRegexp = /#link#(.+)#link#/g;\n  const result = [];\n  let indexObj;\n  indexObj = linkRegexp.exec(value);\n  while (indexObj) {\n    const node = document.createElement(\"a\");\n    const attrs = JSON.parse(indexObj[1]);\n    const keyAndValues = Object.entries(attrs);\n    for (const [_key, _value] of keyAndValues) {\n      node.setAttribute(_key, _value);\n    }\n    node.className = \"editor_custom_link\";\n    node.innerHTML = \"logDownload\";\n    result.push({\n      start: indexObj.index,\n      end: indexObj.index + indexObj[0].length,\n      node\n    });\n    indexObj = linkRegexp.exec(value);\n  }\n  return result;\n}\nfunction createLogMark(text = \"\", type = \"info\") {\n  return `#log<${type}>log#${text}#log<${type}>log#`;\n}\nfunction getLogMark(value) {\n  const result = [];\n  function match() {\n    const logRegexp = /#log<(\\w*)>log#((.|\\r\\n|\\n)*?)#log<(\\w*)>log#/g;\n    let indexObj;\n    indexObj = logRegexp.exec(value);\n    while (indexObj) {\n      const text = indexObj[0].replace(/\\r\\n/g, \"\\n\");\n      const textArr = text.split(\"\\n\");\n      const content = indexObj[2].replace(/\\r\\n/g, \"\\n\");\n      const contentArr = content.split(\"\\n\");\n      const node = document.createElement(\"span\");\n      const type = indexObj[1];\n      node.className = `c-editor--log__${type}`;\n      let offset = 0;\n      for (let i = 0; i < textArr.length; i++) {\n        const textItem = textArr[i];\n        const contentItem = contentArr[i];\n        const cloneNode = node.cloneNode(false);\n        cloneNode.innerText = contentItem;\n        result.push({\n          start: indexObj.index + offset,\n          end: indexObj.index + offset + textItem.length,\n          node: cloneNode\n        });\n        offset = offset + textItem.length + 1;\n      }\n      indexObj = logRegexp.exec(value);\n    }\n  }\n  match();\n  return result;\n}\nfunction createLog(log, type) {\n  const now = getLocalTime();\n  return `[${now}] <${type}> ${log}`;\n}\nfunction createTitle(title, symbolLength, symbol) {\n  const arr = new Array(Math.max(symbolLength || 15, 5));\n  const wrapText = arr.join(symbol || \"=\");\n  return `${wrapText}${title}${wrapText}`;\n}\nconst startRegex = [\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<error>[ \\t])(.+)/,\n    token: [\"tag\", \"\", \"error.strong\", \"error.strong\"],\n    sol: true\n  },\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<info>)(.+)(.?)/,\n    token: [\"tag\", \"\", \"bracket\", \"bracket\", \"hr\"],\n    sol: true\n  },\n  {\n    regex: /(\\[.*?\\])([ \\t]*)(<warning>)(.+)(.?)/,\n    token: [\"tag\", \"\", \"comment\", \"comment\", \"hr\"],\n    sol: true\n  }\n];\nCodeMirror$1.defineSimpleMode(\"fclog\", {\n  start: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"hr\"\n    }\n  ],\n  error: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"error.strong\"\n    }\n  ],\n  info: [\n    ...startRegex,\n    {\n      regex: /.*/,\n      token: \"bracket\"\n    }\n  ],\n  warning: [\n    ...startRegex,\n    {\n      regex: /.*\\[/,\n      token: \"comment\"\n    }\n  ]\n});\nCodeMirror$1.defineSimpleMode(\"log\", {\n  start: [\n    {\n      regex: /^[=]+[^=]*[=]+/,\n      token: \"strong\"\n    },\n    {\n      regex: /([^\\w])([A-Z][\\w]*)/,\n      token: [\"\", \"string\"]\n    },\n    {\n      regex: /(^[A-Z][\\w]*)/,\n      token: \"string\"\n    }\n  ]\n});\nconst _sfc_main$1 = defineComponent({\n  name: \"CodemirrorFclog\",\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    name: {\n      type: String,\n      default: `cm-textarea-${+new Date()}`\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    cminstance: {\n      type: Object,\n      default: () => ({})\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"update:cminstance\", \"ready\"],\n  setup(props, { emit }) {\n    const textarea = ref();\n    const _cminstance = ref(null);\n    const renderTextMark = (cminstance = props.cminstance) => {\n      const marks = cminstance.getAllMarks();\n      marks.forEach((mark) => mark.clear());\n      const value = cminstance.getValue();\n      const linkMarks = [].concat(getLinkMarks(value)).concat(getLogMark(value));\n      for (let _i = 0; _i < linkMarks.length; _i++) {\n        const mark = linkMarks[_i];\n        cminstance.markText(cminstance.posFromIndex(mark.start), cminstance.posFromIndex(mark.end), { replacedWith: mark.node });\n      }\n    };\n    const initialize = () => {\n      var _a;\n      _cminstance.value = markRaw(CodeMirror$1.fromTextArea(textarea.value, props.options));\n      emit(\"update:cminstance\", unref(_cminstance));\n      (_a = _cminstance.value) == null ? void 0 : _a.on(\"change\", renderTextMark);\n    };\n    watch(() => props.cminstance, (val) => {\n      var _a;\n      if (val) {\n        renderTextMark(props.cminstance);\n        (_a = props.cminstance) == null ? void 0 : _a.setValue(props.value);\n        emit(\"ready\", _cminstance);\n      }\n    }, { deep: true, immediate: true });\n    onMounted(() => {\n      initialize();\n    });\n    return {\n      initialize,\n      textarea\n    };\n  }\n});\nconst _hoisted_1 = [\"name\", \"placeholder\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"textarea\", {\n    ref: \"textarea\",\n    name: _ctx.$props.name,\n    placeholder: _ctx.$props.placeholder\n  }, null, 8, _hoisted_1);\n}\nvar FcLog = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render]]);\nconst componentEventMap = {\n  \"update:value\": (value) => value,\n  change: (value, cm) => ({ value, cm }),\n  input: (value) => value,\n  ready: (cm) => cm\n};\nconst cmEvts = [\n  \"changes\",\n  \"scroll\",\n  \"beforeChange\",\n  \"cursorActivity\",\n  \"keyHandled\",\n  \"inputRead\",\n  \"electricInput\",\n  \"beforeSelectionChange\",\n  \"viewportChange\",\n  \"swapDoc\",\n  \"gutterClick\",\n  \"gutterContextMenu\",\n  \"focus\",\n  \"blur\",\n  \"refresh\",\n  \"optionChange\",\n  \"scrollCursorIntoView\",\n  \"update\"\n];\nconst getCmEvts = () => {\n  const result = {};\n  cmEvts.forEach((name) => {\n    result[name] = (...args) => args;\n  });\n  return result;\n};\nconst emitOptions = __spreadValues(__spreadValues({}, componentEventMap), getCmEvts());\nconst DEFAULT_OPTIONS = {\n  mode: \"text\",\n  theme: \"default\",\n  lineNumbers: true,\n  smartIndent: true,\n  indentUnit: 2\n};\nfunction scrollToEnd(cm) {\n  Promise.resolve().then(() => {\n    const nowScrollInfo = cm.getScrollInfo();\n    cm.scrollTo(nowScrollInfo.left, nowScrollInfo.height);\n  });\n}\nconst useEvents = ({\n  props,\n  cminstance,\n  emit,\n  internalInstance,\n  content\n}) => {\n  const realCm = computed(() => {\n    var _a;\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n  const getBindEvents = () => {\n    const evts = [];\n    Object.keys(internalInstance == null ? void 0 : internalInstance.vnode.props).forEach((v) => {\n      if (v.startsWith(\"on\")) {\n        const e = v.replace(v[2], v[2].toLowerCase()).slice(2);\n        !componentEventMap[e] && evts.push(e);\n      }\n    });\n    return evts;\n  };\n  const listenerEvents = () => {\n    realCm.value.on(\"change\", (cm) => {\n      const currentVal = cm.getValue();\n      if (currentVal === content.value)\n        return;\n      content.value = currentVal;\n      content.value && emit(\"update:value\", content.value || \"\");\n      content.value && emit(\"input\", content.value || \"\");\n      Promise.resolve().then(() => {\n        emit(\"change\", content.value, cm);\n      });\n      props.keepCursorInEnd && scrollToEnd(cm);\n    });\n    const tmpEvents = {};\n    const bindEvts = getBindEvents();\n    bindEvts.filter((e) => !tmpEvents[e] && (tmpEvents[e] = true)).forEach((event) => {\n      realCm.value.on(event, (...args) => {\n        emit(event, ...args);\n      });\n    });\n  };\n  return {\n    listenerEvents\n  };\n};\nfunction useViewControl({\n  props,\n  cminstance,\n  presetRef\n}) {\n  const containerWidth = ref(null);\n  const containerHeight = ref(null);\n  const realCm = computed(() => {\n    var _a;\n    return props.merge ? (_a = unref(cminstance)) == null ? void 0 : _a.editor() : unref(cminstance);\n  });\n  const refresh = () => {\n    nextTick(() => {\n      var _a;\n      (_a = realCm.value) == null ? void 0 : _a.refresh();\n    });\n  };\n  const resize = (width = props.width, height = props.height) => {\n    var _a;\n    containerWidth.value = String(width).replace(\"px\", \"\");\n    containerHeight.value = String(height).replace(\"px\", \"\");\n    const cmHeight = containerHeight.value;\n    (_a = realCm.value) == null ? void 0 : _a.setSize(containerWidth.value, cmHeight);\n  };\n  const destroy = () => {\n    var _a;\n    const element = (_a = realCm.value) == null ? void 0 : _a.getWrapperElement();\n    element == null ? void 0 : element.remove();\n  };\n  const reload = () => {\n    var _a, _b, _c;\n    const history = (_a = realCm.value) == null ? void 0 : _a.getDoc().getHistory();\n    (_b = presetRef.value) == null ? void 0 : _b.initialize();\n    destroy();\n    (_c = realCm.value) == null ? void 0 : _c.getDoc().setHistory(history);\n  };\n  const isStyleChaotic = () => {\n    const gutterEl = document.querySelector(\".CodeMirror-gutters\");\n    const gutterElLeft = gutterEl == null ? void 0 : gutterEl.style.left.replace(\"px\", \"\");\n    return gutterElLeft !== \"0\";\n  };\n  const reviseStyle = () => {\n    refresh();\n    if (!isStyleChaotic())\n      return;\n    const timer = setInterval(() => {\n      isStyleChaotic() ? refresh() : clearInterval(timer);\n    }, 60);\n    const clearTimer = setTimeout(() => {\n      clearInterval(timer);\n      clearTimeout(clearTimer);\n    }, 400);\n  };\n  return {\n    reload,\n    refresh,\n    resize,\n    destroy,\n    containerHeight,\n    reviseStyle\n  };\n}\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  props: {\n    value: {\n      type: String,\n      default: \"\"\n    },\n    options: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    globalOptions: {\n      type: Object,\n      default: () => DEFAULT_OPTIONS\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: [String, Number],\n      default: null\n    },\n    height: {\n      type: [String, Number],\n      default: null\n    },\n    originalStyle: {\n      type: Boolean,\n      default: false\n    },\n    keepCursorInEnd: {\n      type: Boolean,\n      default: false\n    },\n    merge: {\n      type: Boolean,\n      default: false\n    },\n    name: {\n      type: String,\n      default: \"\"\n    },\n    marker: {\n      type: Function,\n      default: () => null\n    },\n    unseenLines: {\n      type: Array,\n      default: () => []\n    }\n  },\n  emits: emitOptions,\n  setup(__props, { expose, emit }) {\n    var _a, _b;\n    const props = __props;\n    if (typeof Object.assign !== \"function\") {\n      Object.defineProperty(Object, \"assign\", {\n        value(target, varArgs) {\n          if (target == null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n          }\n          const to = Object(target);\n          for (let index2 = 1; index2 < arguments.length; index2++) {\n            const nextSource = arguments[index2];\n            if (nextSource != null) {\n              for (const nextKey in nextSource) {\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                  to[nextKey] = nextSource[nextKey];\n                }\n              }\n            }\n          }\n          return to;\n        },\n        writable: true,\n        configurable: true\n      });\n    }\n    const cminstance = ref(null);\n    const content = ref(\"\");\n    const presetModeName = shallowRef(Default);\n    const cmOptions = ref(__spreadValues(__spreadValues(__spreadValues({}, DEFAULT_OPTIONS), props.globalOptions), props.options));\n    const internalInstance = getCurrentInstance();\n    const instanceName = props.name || ((_b = (_a = internalInstance == null ? void 0 : internalInstance.parent) == null ? void 0 : _a.type) == null ? void 0 : _b.name) || void 0;\n    const presetRef = ref(null);\n    const realCminstance = computed(() => {\n      var _a2;\n      return props.merge ? (_a2 = unref(cminstance)) == null ? void 0 : _a2.editor() : unref(cminstance);\n    });\n    const { refresh, resize, destroy, containerHeight, reviseStyle } = useViewControl({\n      props,\n      cminstance,\n      presetRef\n    });\n    const { listenerEvents } = useEvents({\n      props,\n      cminstance,\n      emit,\n      internalInstance,\n      content\n    });\n    const unseenLineMarkers = () => {\n      if (props.unseenLines !== void 0 && props.marker !== void 0) {\n        props.unseenLines.forEach((line) => {\n          var _a2, _b2;\n          const info = (_a2 = cminstance.value) == null ? void 0 : _a2.lineInfo(line);\n          (_b2 = cminstance.value) == null ? void 0 : _b2.setGutterMarker(line, \"breakpoints\", (info == null ? void 0 : info.gutterMarkers) ? null : props.marker());\n        });\n      }\n    };\n    const onCodeChange = (newVal) => {\n      var _a2, _b2;\n      const CM_VALUE = (_a2 = cminstance.value) == null ? void 0 : _a2.getValue();\n      if (newVal !== CM_VALUE) {\n        (_b2 = cminstance.value) == null ? void 0 : _b2.setValue(newVal);\n        content.value = newVal;\n        reviseStyle();\n      }\n      unseenLineMarkers();\n    };\n    const ready = () => {\n      listenerEvents();\n      unseenLineMarkers();\n      resize(props.width, props.height);\n      emit(\"ready\", cminstance.value);\n      watch([() => props.width, () => props.height], ([width, height]) => {\n        resize(width, height);\n      }, { deep: true });\n    };\n    const handlePresetModeName = () => {\n      if (props.options.mode === \"fclog\" || props.options.mode === \"log\") {\n        presetModeName.value = FcLog;\n        return;\n      }\n      if (props.merge) {\n        presetModeName.value = Merge;\n        return;\n      }\n      presetModeName.value = Default;\n    };\n    watch(() => props.options, (val) => {\n      var _a2;\n      for (const key in props.options) {\n        (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(key, unref(val[key]));\n      }\n    }, { deep: true });\n    watch(() => props.value, (val) => {\n      onCodeChange(val);\n    });\n    watch(() => props.placeholder, (val) => {\n      var _a2;\n      (_a2 = realCminstance.value) == null ? void 0 : _a2.setOption(\"placeholder\", val);\n    });\n    watch(() => props.merge, (val) => {\n      handlePresetModeName();\n    }, { immediate: true });\n    onBeforeUnmount(() => {\n      destroy();\n    });\n    expose({\n      cminstance,\n      resize,\n      refresh,\n      destroy\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\"codemirror-container\", {\n          merge: _ctx.$props.merge,\n          bordered: _ctx.$props.border || _ctx.$props.merge && !props.originalStyle,\n          \"width-auto\": !_ctx.$props.width || _ctx.$props.width == \"100%\",\n          \"height-auto\": !_ctx.$props.height || _ctx.$props.height == \"100%\",\n          \"original-style\": props.originalStyle\n        }]),\n        style: normalizeStyle({\n          height: unref(containerHeight) + \"px\"\n        })\n      }, [\n        (openBlock(), createBlock(resolveDynamicComponent(unref(presetModeName)), mergeProps({\n          ref_key: \"presetRef\",\n          ref: presetRef,\n          cminstance: cminstance.value,\n          \"onUpdate:cminstance\": _cache[0] || (_cache[0] = ($event) => cminstance.value = $event),\n          style: { \"height\": \"100%\" }\n        }, __spreadProps(__spreadValues(__spreadValues({}, _ctx.$props), _ctx.$attrs), {\n          options: cmOptions.value,\n          name: unref(instanceName),\n          content: content.value\n        }), { onReady: ready }), null, 16, [\"cminstance\"]))\n      ], 6);\n    };\n  }\n});\nvar index = \"\";\nconst install = (app, config) => {\n  if (config) {\n    if (config.options) {\n      _sfc_main.props.globalOptions.default = () => config.options;\n    }\n  }\n  app.component((config == null ? void 0 : config.componentName) || \"Codemirror\", _sfc_main);\n  return app;\n};\nconst CodeMirror = window.CodeMirror || CodeMirror$1;\nconst GlobalCmComponent = install;\nfunction styleInject(css,ref){if(ref===void 0){ref={}}var insertAt=ref.insertAt;if(!css||typeof document===\"undefined\"){return}var head=document.head||document.getElementsByTagName(\"head\")[0];var style=document.createElement(\"style\");style.type=\"text/css\";if(insertAt===\"top\"){if(head.firstChild){head.insertBefore(style,head.firstChild)}else{head.appendChild(style)}}else{head.appendChild(style)}if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}};styleInject(`.codemirror-container {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  width: fit-content;\n  font-size: 12px;\n  overflow: hidden;\n}\n.codemirror-container.bordered {\n  border-radius: 4px;\n  border: 1px solid #dddddd;\n}\n.codemirror-container.width-auto {\n  width: 100%;\n}\n.codemirror-container.height-auto {\n  height: 100%;\n}\n.codemirror-container.height-auto .CodeMirror,\n.codemirror-container.height-auto .cm-s-default {\n  height: 100% !important;\n}\n.codemirror-container .editor_custom_link {\n  cursor: pointer;\n  color: #1474f1;\n  text-decoration: underline;\n}\n.codemirror-container .editor_custom_link:hover {\n  color: #04b4fa;\n}\n.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {\n  color: #666;\n}\n.codemirror-container:not(.original-style) .CodeMirror,\n.codemirror-container:not(.original-style) .CodeMirror-merge-pane {\n  height: 100%;\n  font-family: consolas !important;\n}\n.codemirror-container:not(.original-style) .CodeMirror-merge,\n.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {\n  height: 100%;\n  border: none !important;\n}\n.codemirror-container:not(.original-style) .c-editor--log__error {\n  color: #bb0606;\n  font-weight: bold;\n}\n.codemirror-container:not(.original-style) .c-editor--log__info {\n  color: #333333;\n  font-weight: bold;\n}\n.codemirror-container:not(.original-style) .c-editor--log__warning {\n  color: #ee9900;\n}\n.codemirror-container:not(.original-style) .c-editor--log__success {\n  color: #669600;\n}\n.codemirror-container:not(.original-style) .cm-header,\n.codemirror-container:not(.original-style) .cm-strong {\n  font-weight: bold;\n}\n`);\nexport { CodeMirror, GlobalCmComponent, _sfc_main as VueCodemirror, createLinkMark, createLog, createLogMark, createTitle, _sfc_main as default, getLinkMarks, getLocalTime, getLogMark, logErrorType };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}